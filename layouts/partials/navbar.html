{{ $home    := site.BaseURL }}
{{ $title   := site.Title }}
{{ $logo    := printf "img/logos/%s" site.Params.logos.navbar | relURL }}
{{ $menu    := site.Menus.main }}
{{ $repo    := site.Params.github_repo }}
{{ $github  := printf "https://github.com/%s" $repo }}
{{ $support := site.Params.support }}
{{ $mail    := site.Params.mailing_list }}
{{ $slack    := site.Params.slack }}
<nav class="navbar is-black is-fixed-top">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="{{ $home }}">
        <img src="{{ $logo }}" alt="{{ $title }} navbar logo">
      </a>

      <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbar-menu">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
    </div>

    <div id="navbar-menu" class="navbar-menu">
      <div class="navbar-end">
        {{ range $menu }}
        {{ if .HasChildren }}
        <div class="navbar-item has-dropdown is-hoverable has-text-weight-bold is-uppercase">
          <a class="navbar-link is-arrowless"{{ with .URL }} href="{{ . }}"{{ end }}>
            {{ .Name }}
          </a>

          <div class="navbar-dropdown">
            {{ range .Children }}
            <a class="navbar-item" href="{{ .URL }}">
              {{ .Name }}
            </a>
            {{ end }}
          </div>
        </div>
        {{ else }}
        <a class="navbar-item has-text-weight-medium has-text-weight-bold is-uppercase" href="{{ .URL }}">
          {{ .Name }}
        </a>
        {{ end }}
        {{ end }}

        <div class="navbar-item">
          <div class="buttons">
            {{ if $github }}
            <a class="button is-light" href="{{ $github }}" target="_blank">
              <span class="icon">
                <i class="fab fa-github"></i>
              </span>
              <span class="has-text-weight-bold">
                {{ $repo }}
              </span>
            </a>
            {{ end }}

            {{ if $support }}
            <a class="button is-success" href="{{ $support }}" target="_blank">
              <span class="icon">
                <i class="fa fa-comments"></i>
              </span>
              <span class="has-text-weight-bold">
                Support
              </span>
            </a>
            {{ end }}

            {{ if $mail }}
            <a class="button is-info" href="{{ $mail }}" target="_blank">
              <span class="icon">
                <i class="far fa-paper-plane"></i>
              </span>
              <span class="has-text-weight-bold">
                Mailing list
              </span>
            </a>
            {{ end }}

            {{ if $slack }}
            <a class="button is-slack-green" href="{{ $slack }}" target="_blank">
              <span class="icon">
                <i class="fab fa-slack"></i>
              </span>
              <span class="has-text-weight-bold">
                Slack
              </span>
            </a>
            {{ end }}
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>
{{ partial "notification.html" }}
